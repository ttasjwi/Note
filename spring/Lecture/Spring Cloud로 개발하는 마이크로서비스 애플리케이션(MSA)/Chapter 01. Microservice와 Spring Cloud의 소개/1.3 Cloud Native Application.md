# <a href = "../README.md" target="_blank">Spring Cloud로 개발하는 마이크로서비스 애플리케이션(MSA)</a>
## Chapter 01. Microservice와 Spring Cloud의 소개
### 1.3 Cloud Native Application
1) Microservices
2) CI/CD
3) DevOps
4) Container 가상화

---

# 1.3 Cloud Native Application

---

### 1) Microservices
Cloud Native Application들은 마이크로 서비스의 형태로 개발된다.

---

### 2) CI/CD

### 2.1 CI(Continuous Integration, 지속적 통합)
- 여러 팀, 개발자들에 의해 애플리케이션을 개발할 경우, 결과물을 통합하기 위한 형상관리
- 통합된 코드를 빌드, 테스트하는 과정 그 자체를 의미하는 경우도 있음.
- 통합 서버, 소스 관리(SCM), 빌드 도구, 테스트 도구
  - SCM : 소프트웨어 형상 관리(SCM, Software Configuration Management)
    - 소프트웨어 개발 및 유지보수 과정에서 발생하는 소스코드, 문서 등 각종 결과물(형상)에 대한 변경사항을 체계적으로 관리하고 제어하기 위한 활동
    - Git은 SCM의 일종인 VCS(Version Control System)의 대표적인 툴이다.
- 대표적인 CI 툴 : Jenkins, Team CI, Travis CI
  - 이들은 Git과 같은 형상관리시스템과 연동하여 사용하게 된다.
  - Git에 커밋 함과 동시에, 빌드/테스트를 함으로서, 다른 쪽의 코드와 연결됐을 때 문제가 발생하는 지 바로 확인할 수 있다.

### 2.2 CD(지속적 배포)
- Continuous Delivery : 지속적 전달
  - 운영자 등의 개입으로, 소스 저장소의 실행 파일을 실행 환경에 수동으로 반영하는 것
- Continuous Deployments : 지속적 배포
    - 수동적인 작업 없이, 실행 환경까지 완벽하게 자동 배포되는 것
- Pipe line
- 물론, 매번 기존 코드를 완전히 버리고 새로운 코드로 변경하는 것은 여러 모로 고민해야할 부분이 많다.
  - 시스템의 정상적인 운영하고, 시스템의 다운 타임을 최소화하는 것이 최우선적이다.
  - 변경된 시스템을 바로 반영하기 보다, 기존의 시스템과 함께 운영함으로서, 사용자에게 발생할 수 있는 이질점, 문제점들을 최소화하는 것이 중요하다.

### 2.3 전략 : 카나리 배포와 블루그린 배포
- 카나리 배포
  - 이전 버전 서비스를 대부분의 사용자(예를 들어 95%)가 사용하게 하고, 소수의 사용자(예:5% 사용자)를 새 버전의 서비스를 이용하게 하여
  정상적이면 전체를 배포한다.
  - 서버의 트래픽 일부를 신 버전으로 분산하여, 오류 여부를 확인할 수 있다.
- 블루/그린 배포
  - 구 버전을 블루, 신 버전을 그린으로 함. 신 버전을 배포하고 일제히 전환하여 모든 연결을 신 버전을 바라보게 하는 전략.
  - 구 버전, 신 버전 서버를 동시에 나란히 구성하여 배포 시점에 트래픽이 일제히 전환된다.
  - 빠른 롤백이 가능하고, 운영환경에 영향을 주지 않고 실제 서비스 환경으로 신 버전 테스트가 가능하다.


---

### 3) DevOps

### 3.1 Development(개발) + Operations(운영) + Quality Assurance(품질 보증, QA)
- 개발 조직, 운영조직의 통합
- 통합을 통해 고객의 요구사항을 빠르게 반영하고, 더 만족도 높은 결과물을 제시하는 것이 목적을 두고 있다.

### 3.2 변경 요구가 들어오자마자 빠른 반영을 통해, 더 만족도 높은 결과물을 빠르게 제시하는 것
- 기존 엔터프라이즈 애플리케이션은 고객의 요구에 맞게 도메인 분석, 시스템 설계, 애플리케이션 구현, 빌드, 테스트, 배포 과정을 거쳐
시스템 개발을 완료해야했다. (물론 개발 조직에 따라, 개발 조직 고유의 프로세스, 조직적 특성 때문에 거쳐야하는 필수적인 과정이 더 있을 수 있다.)
이런 과정은 짧게는 3-6개월, 길게는 1년-n년에 걸쳐 진행된다.
- 개발 기간이 길어지면 변경, 요구사항에 바로 대처하기 어렵다는 단점을 가지게 된다.
- 고객의 요구사항은 언제든 변경될 수 있고, 이런 변경사항에 대한 대응은 모아서 일괄적으로 처리하기 보다, 변경 요구가 들어오자마자 바로
반영될 수 있는 구조가 더 좋다.
- 물론, 요구사항이 들어오자마자 바로 변경 코드를 작성하고, 테스트 하고,... 하는 것은 전체 개발 일정을 더디게 하는 단점이
있을 수 있긴 하다.
- DevOps에서 추구하는 서비스/애플리케이션은 궁극적으로 고객의 요구사항에 맞는 오류 없는 완성물이여야 한다. 따라서 자주 테스트하고,
자주 피드백을 받고, 자주 업데이트하는 과정을 거쳐 전체 업데이트 일정이 완료될 때까지 지속적으로 끊임없이 업데이트하고 배포해야한다.

---

### 4) Container 가상화

### 4.1 마이크로 서비스를 클라우드에 배포하기 위해서는, 클라우드 가상화 기술을 사용해야한다.
- Cloud Native Architecture의 핵심
- 기존 로컬환경에서 운영, 유지해야했던 시스템을 클라우드 환경으로 이전하여, 적은 비용으로 탄력성 있는 시스템으로 구축할 수 있게 한 배경.
- 하드웨어 가상화 기술, 서버 가상화 기술에 비하여 적은 리소스를 사양하여 서비스를 구축할 수 있다.

### 4.2 전통적인 방식(Traditional Deployment)
- 하드웨어 시스템 위에 운영체제를 설치하고 그 위에서 애플리케이션을 운영함

### 4.3 가상화 방식(Virtualized Deployment)
- 운영체제 위에, Hypervisor 기술을 통한 가상 머신을 기동함.
- 각각의 가상머신은 호스트 머신의 하드웨어 자원을 쪼개서 사용하여, 독립적인 운영체제를 가지고 실행될 수 있다.
- 각각의 가상머신 위에서 애플리케이션을 운영할 수 있다.
- 하지만, 각각의 가상머신들 위에서 동작하는 애플리케이션은 호스트 운영체제에 많은 부하를 주게 되고, 시스템 확장에 한계가 있을 수
밖에 없다.

### 4.4 컨테이너 가상화 기술을 기반으로 하여 시스템을 구축(Container Deployment)
- 운영체제 위에 컨테이너 가상화를 기동하기 위한 소프트웨어, 서비스를 작동(공통적인 라이브러리, 리소스를 이 곳에서 공유)
- 각각의 컨테이너마다, 필요한 부분은 그 컨테이너들이 각각 가져서 실행할 수 있는 구조
- 따라서, 기존 하드웨어 가상화 기술보다 더 적은 리소스를 사용할 수 있고, 더 가볍고 빠르게 운영할 수 있다.

---

