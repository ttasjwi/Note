# <a href = "../README.md" target="_blank">데이터베이스 시스템</a>
## Chpater 02. 관계형 모델 소개
### 2.3 키
1) 키(Key)
2) 슈퍼키(Super Key)
3) 후보키(Candidate Key)
4) 기본키(Primary Key)와 기본키 제약조건
5) 외래키(Foreign Key)
6) 외래키 제약조건, 참조무결성 제약조건

---

# 2.3 키

---

## 1) 키(Key)
- 릴레이션에서 존재하는 튜플을 구별하기 위한 수단
- 릴레이션에 존재하는 튜플들은 모두 
- 두 개 이상의 속성들로 구성하기도 함

---

## 2) 슈퍼키(Super Key)
- 유일성
- 튜플을 유일하게 식별할 수 있도록 해주는 하나 혹은 그 이상의 속성들의 집합

---

## 3) 후보키(Candidate Key)
- 유일성 + 최소성
- 최소한의 슈퍼키
- 릴레이션을 구분하게 하는 것과 관련 없는 속성들을 배제
- 여러 개의 속성들의 집합이 후보키가 될 수 있다.

---

## 4) 기본키(Primary Key)와 기본키 제약조건
### 4.1 기본키
- 후보키들 중에서 데이터베이스 설계자에 의해 선택된 키
- 릴레이션 스키마에서, 밑줄을 쳐서 표시
  - 예) classroom(<u>building</u>, room_number, capacity)


### 4.2 기본키 제약조건
- 그 어떤 튜플도 동시에 키 속성(정확히는 기본키)에 대해 같은 값을 가질 수 없다.

## 4.3 기본키 선택시 주의 사항
- 절대로 변하지 않거나 매우 드물게 변하도록 선택해야한다.
- 개인적으로 실무적 관점에서 놓고보면 드물게 변하는 것 자체도 동의하지 않는다. 실세계의 영향을 받아 변하지 않는 무의미한 식별자를 사용하는 것이
장기적인 관점에서 좋다.
  - 예) 주민등록번호도 결국 변화한다. 그리고 실세계에서는 주민등록번호 수집도 제약이 생겼다.

---

## 5) 외래키(Foreign Key)

### 5.1 외래키
- 다른 릴레이션의 기본키를 그대로 참조하는 속성 또는 속성의 집합
- 어떤 릴레이션에 소속된 속성 또는 속성 집합이, 다른 릴레이션의 기본키가 되는 키.
- 외래키 속성의 도메인과 참조되는 기본키 속성의 도메인은 반드시 같아야함
    - 도메인이 같아야, 연관성 있는 투플을 찾기 위한 비교 연산이 가능해짐.
- 하나의 릴레이션에는 외래키가 여러개 존재할 수 있음.
- 외래키를 기본키로 사용할 수도 있고 여러개의 외래키를 포함하여 기본키를 구성할 수 있음.

### 5.2 참조하는 릴레이션, 참조되는 릴레이션
- 외래키를 가진 릴레이션을 참조하는 릴레이션, 기본키를 가진 릴레이션을 참조되는 릴레이션이라고 함.
- 참조하는 릴레이션과 참조되는 릴레이션이 같을 수도 있음. 즉, 외래키 자신이 속한 릴레이션의 기본키를 참조하도록 외래키를 정의할 수 있음.
  - 예) (기본키 - 고객아이디) - (외래키 : 가입추천고객)

### 5.3 외래키와 null
- 외래키는 기본키를 참조하지만, 기본키가 아니기 때문에 null값을 가질 수 있음.
  - 예) 가입추천고객이 null이더라도 이미 기본키가 존재하기 때문에 투플을 특정할 수 있음

---

## 6) 외래키 제약조건, 참조무결성 제약조건

### 6.1 외래키 제약조건
- 릴레이션 인스턴스의 외래키는 null일 수 있다.
- 릴레이션 인스턴스의 외래키가 null이 아니라면, 참조되는 릴레이션에서 적어도 하나의 어떤 튜플의 기본키로 반드시 등장해야한다.
(기본키가 아닌 경우, 투플을 유일하게 구별하기 어려움.)
- 오늘날의 데이터베이스 시스템은 외래키 제약 조건을 지원한다.


### 6.2 참조 무결성 제약 조건
> section(<u>course_id</u>, <u>sec_id</u>, <u>semester</u>, <u>year</u>, building, room_number, time_slot_id)

> time_slot(<u>time_slot_id</u>, <u>day</u>, <u>start_time</u>, end_time)

- 참조되는 릴레이션에서 적어도 하나의 튜플의 특정 속성으로 출현해야한다.
- 외래키 제약조건에서는, 참조되는 릴레이션의 기본키로 출현해야한다고 규정되어 있는데, 여기서 더 완화한 것이다.
- 그러나 대부분의 데이터베이스 시스템은 참조 무결성 제약조건은 지원하지 않는다.

---
