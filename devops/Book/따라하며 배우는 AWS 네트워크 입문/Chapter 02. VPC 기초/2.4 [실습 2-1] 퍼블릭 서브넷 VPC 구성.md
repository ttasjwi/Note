# <a href = "../README.md" target="_blank">따라하며 배우는 AWS 네트워크 입문</a>
## Chapter 02. VPC 기초
### 2.4 [실습 2-1] 퍼블릭 서브넷 VPC 구성
1) 퍼블릭 서브넷 VPC 생성
2) 검증

---

# 2.4 [실습 2-1] 퍼블릭 서브넷 VPC 구성

---

## 1) 퍼블릭 서브넷 VPC 생성

### 1.1 VPC 생성
- 서비스 -> 네트워킹 및 콘텐츠 전송 -> VPC -> Virtual Private Cloud -> VPC -> VPC 생성
- 생성
  - 이름 : CloudNeta-VPC
  - Ipv4 CIDR : 10.0.0.0/16
- 생성후 확인해보면 가상 라우터가 생성되어, 기본 라우팅 테이블을 보유한 것을 확인할 수 있다.


### 1.2 퍼블릭 서브넷 생성
- 서비스 -> 네트워킹 및 콘텐츠 전송 -> VPC -> Virtual Private Cloud -> 서브넷 -> 서브넷 생성
- 생성
  - VPC ID : 앞에서 지정한 VPC
  - 서브넷 이름 : CloudNeta-Public-SN
  - 가용 영역(AZ) : ap-northeast-2a
  - IPv4 블록 : 10.0.0.0/24
- 생성 후 확인해보면 어떤 라우팅 테이블에도 연결되어 있지 않고, 그저 가상 라우터가 가진 기본 라우팅 테이블에 연결되어 있다.

### 1.3 인터넷 게이트웨이 생성 및 VPC 연결
- 서비스 -> 네트워킹 및 콘텐츠 전송 -> VPC -> Virtual Private Cloud -> 인터넷 게이트웨이 -> 인터넷 게이트웨이 생성
  - 생성 -> 이름 : CloudNeta-IGW
- 여기까지 하면 아무런 VPC에 연결 안 된 IGW가 만들어진다. 하나의 IGW는 하나의 VPC에 연결할 수 있는데 이를 VPC에 연결해야한다.
- 작업 -> VPC 연결 -> CloudNeta-VPC 에 연결
- 여기까지 하면 VPC에 IGW가 연결됐지만, 인터넷 구간으로 향하는 라우팅 경로가 없기 때문에 인터넷 통신은 불가능하다.

### 1.4 퍼블릭 라우팅 테이블 생성 및 서브넷 연결
- 서비스 -> 네트워킹 및 콘텐츠 전송 -> VPC -> Virtual Private Cloud -> 라우팅 테이블 -> 라우팅 테이블 생성
- 생성
  - 이름 : CloudNeta-Public-RT
  - VPC : CloudNeta-Public-VPC(아까 생성한 VPC)
- 서브넷 생성을 확인한다.
- 서블릿 연결 -> 서브넷 연결 편집 -> 위에서 생성했던 서브넷을 지금 만든 라우팅 테이블에 연결한다.
- 이제 우리가 생성했던 서브넷은 기본 라우팅 테이블이 아닌, 우리가 만든 라우팅 테이블에 명시적으로 연결됐다.

### 1.5 퍼블릭 라우팅 테이블 경로 추가
- 서비스 -> 네트워킹 및 콘텐츠 전송 -> VPC -> Virtual Private Cloud -> 라우팅 테이블
- 라우팅 테이블 선택 - 라우팅 - 라우팅 편집 - 라우팅 추가
  - 대상 : 0.0.0.0/0
  - 대상 : 인터넷 게이트웨이 - (아까 생성한 IGW)

---

## 2) 검증

### 2.1 EC2 인스턴스 생성
- 서비스 -> 컴퓨팅 -> EC2 -> 인스턴스 -> 인스턴스 -> 인스턴스 시작
  - 이름 : Public-EC2
  - AMI : Amazon Linux 2 AMI
  - 인스턴스 유형 : t2.micro
  - 키 페어 : 생성했던 키
  - 네트워크 설정
    - VPC : 아까 생성한 VPC
    - 서브넷 : 아까 생성한 Public 서브넷
    - 퍼블릭 서브넷 자동 할당
    - 보안그룹 : 기본값
  - 스토리지 추가 : 기본값

### 2.2 EC2 인스턴스 접속 후 통신 확인
- EC2 퍼블릭 IP를 통해 SSH 접속
- ping google.com 입력 후 ping 확인

---
