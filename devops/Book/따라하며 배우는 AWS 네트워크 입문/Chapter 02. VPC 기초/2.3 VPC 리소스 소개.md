# <a href = "../README.md" target="_blank">따라하며 배우는 AWS 네트워크 입문</a>
## Chapter 02. VPC 기초
### 2.3 VPC 리소스 소개
1) 서브넷
2) 가상 라우터와 라우팅 테이블
3) 인터넷 게이트웨이
4) NAT 게이트웨이
5) 보안 그룹과 네트워크 ACL

---

# 2.3 VPC 리소스 소개

---

## 1) 서브넷

### 1.1 서브넷
- 네트워크를 부분적으로 나눈 망
- 클라우드 환경의 VPC에서도 서브넷을 통해 네트워크를 분리하여 나눌 수 있다. 
- 서브넷의 IP 대역은 VPC의 IP 대역에 속해 있어야 한다.
- 서브넷은 1개의 가용 영역(AZ)에 속해 있어야 한다.
- AWS 서브넷은 IP 대역에서 미리 예약된 IP 주소들이 있는데, 이들은 AWS 자원에 할당할 수 없다.
  - 예) 10.0.0.0/24 대역의 10.0.0.0 ~ 10.0.0.0.255 에 대하여 아래의 IP
    - 첫번째 주소 (10.0.0.0) : 네트워크 주소
    - 두번째 주소 (10.0.0.1) : AWS VPC 가상 라우터 주소
    - 세번째 주소 (10.0.0.2) : AWS DNS 서버 주소
    - 네번째 주소 (10.0.0.3) : 향후 새로운 기능에 활용할 주소
    - 마지막 주소 (10.0.0.255) : 네트워크 브로드캐스트 주소

### 1.2 퍼블릭 서브넷과 프라이빗 서브넷
- 퍼블릭 서브넷 : 외부 인터넷 구간과 직접적으로 통신할 수 있는 공공 네트워크
- 프라이빗 서브넷 : 외부 인터넷 구간과 직접적으로 통신할 수 없는 폐쇄적인 네트워크
  - 참고로 프라이빗 서브넷에서 외부 네트워크와 통신할 필요가 있을 때는 NAT 게이트웨이를 이용해야한다.

---

## 2) 가상 라우터와 라우팅 테이블

### 2.1 가상 라우터
- VPC를 생성하면 가상 라우터가 생성된다.

### 2.2 라우팅 테이블
- 가상 라우터에는 라우팅 테이블을 가지고 있어 목적지 네트워크로 라우팅하며 통신한다.
- 기본적으로 최초의 가상 라우팅 테이블엔 로컬 네트워크에 대한 경로만 잡혀 있다.

### 2.2 서브넷마다 라우팅 테이블을 가질 수 있다.
- 가상 라우터에는 서브넷 별로 라우팅 테이블을 매핑해줄 수 있다.
- 기본적인 라우팅 테이블을 사용할 수도 있지만, 별도로 라우팅 테이블을 생성하고, 매핑하여 서브넷 당 개인적인 라우팅 테이블을 가질 수 있다.

---

## 3) 인터넷 게이트웨이
- VPC와의 논리적인 연결
- VPC당 1개만 연결할 수 있다.
- 퍼블릭 서브넷 내의 자원은 IGW를 통해 외부의 인터넷 구간과 통신할 수 있다.
- 퍼블릭 서브넷은 자신의 라우팅 테이블에 외부 인터넷 구간으로 나가는 타깃을 IGW로 지정해주어야 한다.
- 인터넷 게이트웨이는 양방향으로 연결을 지원하기에 외부 인터넷 구간에서 퍼블릭 서브넷의 퍼블릭 IP로도 정상적인 통신이 가능하다.

---

## 4) NAT 게이트웨이
- Network Address Translation
- 인터넷 게이트웨이처럼 외부 인터넷 구간과 연결하는 관문 역할을 수행함.
- 프라이빗 서브넷의 자원들은 퍼블릭 IP를 가질 수 없는데, 외부와 통신이 필요할 때 프라이빗 IP를 퍼블릭 IP로 변환하여 통신을 도울 수 있다.
- NAT 게이트웨이는 한쪽 방향으로만 동작한다. 프라이빗 서브넷에서 외부 인터넷으로 통신이 가능하지만, 외부 인터넷에서 프라이빗 서브넷으로 통신은
불가능하다.

---

## 5) 보안 그룹과 네트워크 ACL
- VPC는 인스턴스 레벨, 서브넷 레벨 상에 대상을 필터링할 수 있는 보안 기술을 적용할 수 있다.
- 인바운드/아웃바운드 데이터에 대해 허용 규칙, 거부 규칙을 수립하여 원하는 데이터만 수용할 수 있게 필터링할 수 있다.
- 보안그룹 : 인스턴스 레벨의 보안 기술은 보안 기술
- 네트워크 ACL(Network Access Control) : 서브넷 별로 지정하는 보안 기술

---
