# <a href = "../README.md" target="_blank">오브젝트</a>
## Chapter 05. 책임 할당하기
### 5.1 책임 주도 설계를 향해
1) 데이터보다 행동을 먼저 결정하라
2) 협력이라는 문맥 안에서 책임을 결정하라
3) 책임 주도 설계
---

# 5.1 책임 주도 설계를 향해

데이터 중심의 설계에서 책임 중심의 설계로 전환하기 위해서는 다음의 두 가지 원칙을 따라야 한다.
- 데이터보다는 행동을 먼저 결정하라
- 협력이라는 문맥 안에서 책임을 결정하라

---

## 1) 데이터보다 행동을 먼저 결정하라

### 1.1 객체에게 중요한 것은 데이터가 아니라 외부에 제공하는 행동이다.
- 클라이언트 입장에서 봤을 때 객체가 수행하는 행동은 그 객체의 책임을 의미함
- **객체는 협력에 참여하기 위해 존재하며 협력 안에서 수행하는 책임이 객체의 존재가치를 증명한다.**

### 1.2 데이터에 초점을 맞춘 설계의 문제
- 데이터는 객체가 책임을 수행하는 데 필요한 재료를 제공할 뿐이다.
- 데이터에 초점을 맞추면 객체의 캡슐화가 악화되기 때문에 낮은 응집도와, 높은 결합도를 가진 객체들로 넘쳐나게 된다.
- 결국 데이터 중심 설계로 얻게 되는 것은 변경에 취약한 설계다.

### 1.3 질문의 순서 바꾸기 : 무슨 행동, 책임이 필요한가?
- 객체의 행동, 책임을 먼저 결정하고 객체의 상태를 결정해야 한다.
- 꼭 필요한 책임만을 퍼블릭 인터페이스로 노출하고, 책임을 위해 필요한 객체의 세부적인 상태와 행동을 그 뒤에 숨기면 자연스럽게
캡슐화가 이루어지고, 높은 응집도와 결합도를 가진 객체를 만들 수 있다.
- 결국 적절한 객체에게 적절한 책임을 할당하는 것이 중요하다.

---

## 2) 협력이라는 문맥 안에서 책임을 결정하라

### 2.1 협력에 적합한 책임은 메시지 수신자에게 필요한 책임이다.
- 객체에게 할당된 책임의 품질은 협력에 적합한 정도로 결정된다.
  - 객체에게 할당된 책임이 협력에 어울리지 않는다면 그 책임은 나쁜 것이다.
  - **객체의 입장에서는 책임이 조금 어색해 보이더라도, 협력에 적합하다면 그 책임은 좋은 것이다. 책임은 객체의 입장이 아니라 객체가 참여하는 협력에 적합해야한다.**
- 협력에 적합한 책임은 메시지 수신자에게 적합한 책임이 아닌, 메시지 수신자가 아니라 메시지 전송자에게 적합한 책임을 의미한다.
  - 메시지를 전송해야하는 클라이언트의 의도에 적합한 책임을 할당해야 한다.

### 2.2 메시지 송신자 입장에서는 메시지 수신자를 모른다. (메시지 수신자의 캡슐화)
- 메시지는 클라이언트가 필요한 무언가, 즉 의도를 표현한다.
- 클라이언트는 메시지를 누가 처리해줄 지 모른다. 단지 누군가 메시지를 수신하고 응답할 것을 믿고 메시지를 보낼 뿐이다.
- 메시지를 결정하고, 이것을 수신할 임의의 객체를 그 이후에 결정한다. 메시지를 수신하기로 결정된 객체는 메시지를 처리할 '책임'을 할당 받는다.
- 메시지를 먼저 결정하기 때문에 메시지 송신자는 수신자가 누구인지에 대한 어떠한 가정도 할 수 없다. 수신자가 캡슐화되는 것이다.
  - 이전의 데이터 중심 설계를 되돌아보면 메시지 송신자가 메시지 수신자에 대한 많은 것을 알 수 있었다. 

### 2.3 협력이란 문맥 아래, 메시지에 집중하고, 그 후에 이를 처리할 객체를 결정하라.
- 협력이라는 문맥에서 적절한 책임은 클라이언트 관점에서 적절한 책임이다.
- 클라이언트가 필요한 메시지를 먼저 설계하고 이를 처리할 객체를 그 후에 결정하게 되면 위에서 설명한 바와 같이 캡슐화를 지키기 쉬워진다.
- 이와 같은 책임 주도 설계는 응집도가 높고 결합도가 낮으며 변경하기 쉬운 코드를 만들게 해준다.

---

## 3) 책임 주도 설계
- 시스템이 사용자에게 제공해야하는 기능인 시스템 책임을 파악한다.
- 시스템 책임을 더 작은 책임으로 분할한다.
- 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
- 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
- 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

---
