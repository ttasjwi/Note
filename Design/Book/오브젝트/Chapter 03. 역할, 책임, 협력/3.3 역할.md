# <a href = "../README.md" target="_blank">오브젝트</a>
## Chapter 03. 역할, 책임, 협력
### 3.3 역할
1) 역할과 협력
2) 유연하고 재사용 가능한 협력
3) 객체 대 역할
4) 추상화 관점에서의 역할
5) 배우와 배역
---

# 3.3 역할

---

## 1) 역할과 협력

### 1.1 역할
- 객체가 어떠한 특정한 협력 안에서 수행하는 책임의 집합
- 협력을 모델링할 때는, '특정한 객체'가 아니라 역할에 책임을 할당한다.

### 1.2 책임 할당 과정
- 어떠한 메시지를 처리할 수 있는 익명의 역할을 찾는다.
- 역할을 수행할 수 있는 객체를 선택한다.

---

## 2) 유연하고 재사용 가능한 협력

### 2.1 중복되는 협력
- 책임을 수행할 수 있는 구체적인 객체마다 협력을 구현하면 코드의 중복이 발생한다.
- 책임을 수행할 수 있는 구체적인 객체가 두 개 이상일 경우, 이러한 구체적 객체들을 포괄하는 추상화가 필요하다.

### 2.2 '역할'의 도입, 협력의 재사용
- 책임에 초점을 맞췄을 때, 책임을 수행할 수 있는(메시지에 응답할 수 있는) 이들을 대표하는 대표자를 두면 중복되는 협력을 통합할 수 있다.
여기서 말하는 대표자를 협력 안에서 두 종류 이상의 객체를 교대로 바꿔 끼울 수 있는 '일종의 슬롯'으로 생각할 수 있다. 이 '슬롯'이
'역할'이다.
- '역할'은 다른 것으로 교체할 수 있는 '책임의 집합'이다.

### 2.3 '역할'을 통한 유연한 설계
- 동일한 책임을 수행하는 '역할'을 기반으로 두 개 이상의 중복된 협력을 하나로 통합할 수 있다.
- 역할을 이용하면 불필요한 중복 코드를 제거할 수 있다.
- 책임과 역할을 중심으로 협력을 바라보는 것이, 변경과 확장이 용이한 유연한 설계로 나아가는 첫걸음이다.

### 2.4 협력을 가능케 하는 기술적 메커니즘들
- 역할을 활용하여, 협력을 변경하거나 새로 추가하지 않고 기능을 확장할 수 있다.
- 앞에서 학습한 인터페이스 업캐스팅, 다형성, 지연 바인딩, 상속, 컴파일 시간 의존성-런타임 의존성 간 차이와 같은 다양한 기술적 메커니즘들이 
유연하고 재사용 가능한 협력을 만들 수 있는 기반을 제공한다.

### 2.5 역할의 구현
- java 문법에서 역할을 구현하는 가장 일반적인 방법은 '추상 클래스'와 '인터페이스'를 사용하는 것이다.
  - 추상 클래스와 인터페이스는 구체 클래스들이 따라야 하는 책임들의 집합을 서술한 것이다.
    - 추상 클래스는 책임의 일부를 구현해놓은 것
    - 인터페이스는 일체의 구현 없이 책임의 집합만을 나열해놓은 것
    - 어찌됐든 협력의 관점에서 놓고보면 둘 모두 '역할'을 정의할 수 있는 구현 방법이라는 공통점을 가짐
- 추상 클래스와 인터페이스는 동일한 책임을 수행하는 다른 종류의 클래스들을 협력에 참여시킬 수 있는 확장 포인트를 제공한다.
- 물론, 일단 협력 안에서 역할이 어떤 책임을 수행해야하는 지 결정하는 것이 중요하고, 역할을 구현하는 방법은 그 다음의 문제이다.
- 객체에게 중요한 것은 행동이며, 역할은 객체를 추상화해서 객체 자체가 아닌 협력에 초점을 맞출 수 있게 한다.

---

## 3) 객체 대 역할

### 3.1 책임을 수행할 수 있는 후보
- 협력에서 어떤 책임을 수행할 수 있는 후보가, 한 종류의 객체뿐이라면 객체로 간주한다.
- 협력의 여러 종류의 객체들이 참여할 수 있으면 역할이라고 부르면 된다.
  - 역할은 객체가 참여할 수 있는 슬롯이고, 슬롯에 끼워지는 객체는 대체 가능하다.

### 3.2 설계 초반에 역할과 객체을 명확하게 구분하는 것은 그렇게 중요하지 않다.
- 설계 초반에는 적절한 책임과 협력의 큰 그림을 탐색하는 것이 가장 중요한 목표여야하고, 역할과 객체를
명확하게 구분하는 것은 그렇게 중요하지 않다.
- **설계 초반에 중요한 것은 협력을 위해 어떤 책임이 필요한 지 이해하는 것이다.**
- 동일한 책임을 서로 다른 방식으로 수행할 수 있는 객체들이 필요해질 때가 왔을 때 역할 도입을 고려해도 늦지 않다.

### 3.3 슬롯을 무엇으로 결정할 지에 대한 기준
- 다양한 객체들이 협력에 참여한다는 것이 확실하다면 역할로 시작하라.
- 하지만 모든 것이 애매하고 정확한 결정을 내리기 어려운 상황이면 구체적인 객체로 시작하라. 
단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제해가면서 필요한 순간에 객체로부터 역할을 분리해내는 것이
가장 좋은 방법이다.

### 3.4 역할 모델링
- 역할을 설계의 중심 개념으로 보는 것
- 상호작용하는 객체들의 협력 패턴을 역할들 사이의 협력 패턴으로 추상화함으로써, 재사용 가능한 시스템을 얻을 수 있다는 개념
- 협력을 구체적인 객체가 아니라, 추상적인 역할의 관점에서 설계하면 협력이 유연하고 재사용 가능해진다.
- 역할 덕분에 설계의 구성요소를 추상화할 수 있다.

---

## 4) 추상화 관점에서의 역할

### 4.1 추상화를 이용한 설계의 장점
- 추상화 계층만을 이용하면 중요한 정책을 상위 수준에서 단순화할 수 있다.
- 설계가 더 유연해진다.

### 4.2 추상화 계층(역할)만을 이용하면 중요한 정책을 상위 수준에서 단순화할 수 있다.
- 역할을 사용하면 세부사항에 억눌리지 않고도 상위 수준의 정책을 상위 수준으로 추상화하여 쉽고 간단하게 표현할 수 있다.
- 추상화를 이용해서 협력을 표현하면 객체 사이의 핵심적인 상호작용이 좀 더 또렷하게 드러난다.
- 역할을 통해 상위 수준에서 협력을 설명하면, 구체적인 객체들이 가지는 복잡성을 제거하고 단순화해서 표현할 수 있다.

### 4.3 설계를 유연하게 할 수 있다.
- 협력 안에서 동일한 책임을 수행하는 객체들은 동일한 역할을 수행하기 때문에 서로 대체 가능하다.
- 역할은 다양한 환경에서 다양한 수용할 수 있게 해주므로 협력을 유연하게 만든다.
- 협력 안에서 '역할'이라는 추상화를 이용하면 기존 코드를 수정하지 않고도 새로운 행동을 추가할 수 있다.
- 프레임워크, 디자인 패턴과 같이 재사용 가능한 코드나 설계 아이디어를 구성하는 핵심적인 요소가 '역할'이다.

---

## 5) 배우와 배역

### 5.1 연극의 배역과 배우의 관계
- 배역은 연극 배우가 특정 연극에서 연기하는 역할이다.
- 배역은 연극이 상영되는 동안에만 존재하는 일시적인 개념이다.
- 연극이 끝나면 연극 배우는 배역이라는 역할을 벗어 버리고 원래의 연극 배우로 돌아간다.
- 서로 다른 여러 명의 배우들이 동일한 배역을 연기할 수 있다.
- 하나의 배우가 다양한 연극 안에서 서로 다른 배역을 연기할 수 있다.

### 5.2 협력에서의 역할과 객체의 관계
- '역할'은 객체가 특정 협력에 참여할 때 가지는 일시적인 개념이다. 
- '역할'은 객체가 협력에 참여하는 잠시 동안에만 존재하는 일시적인 개념이다.
- 협력이 끝나면 협력에서의 역할을 잊고 원래 객체로 돌아올 수 있다.
- 서로 다른 여러 객체들이 동일한 역할을 수행할 수 있다.
- 하나의 객체가 다양한 협력 속에서 서로 다른 역할을 가질 수 있다.
- 역할은 특정 객체의 종류를 캡슐화하기에, 동일한 역할을 수행하고 계약을 준수하는 대체 가능한 객체들은 다형적이다.

---
