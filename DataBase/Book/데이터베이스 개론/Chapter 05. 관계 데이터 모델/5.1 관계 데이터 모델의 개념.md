
# <a href = "../README.md" target="_blank">데이터베이스 개론</a>
## Chapter 05. 관계 데이터 모델
### 5.1 관계 데이터 모델
1) 관계 데이터 모델의 기본 용어
2) 릴레이션과 데이터베이스의 구성
3) 릴레이션의 특성
4) 키의 종류

---

# 5.1 관계 데이터 모델

## 1) 관계 데이터 모델의 기본 용어

![Relation.jpg](img/Relation.jpg)

### 릴레이션
- 한 개체에 대한 관한 데이터를, 2차원 테이블의 구조로 저장한 것.

### 1.1> 속성(Attribute)
- 릴레이션의 열(column)
- 각 속성을 서로 다른 이름을 이용해 구별.
- 파일 관리 시스템에서 : 릴레이션을 파일이라 했을 때, 필드(Field)에 대응하는 개념

### 1.2> 투플(Tuple)
- 릴레이션의 행(row)
- 하나의 투플은, 하나의 개체 인스턴스에 해당
- 파일 관리 시스템에서의 레코드(record)에 대응하는 개념

### 1.3> 도메인(domain)
- 속성 하나가 가질 수 있는 모든 값들의 집합
- 일반적으로 도메인은 가능한 값을 일일이 나열하기 어려운 경우가 대부분이라, 속성의 특성을 고려한 데이터 타입으로 정의
  - 예) 이름 속성의 도메인을 CHAR(20), 나이 속성의 도메인을 INT로 정의하기
- 프로그래밍 언어에서 : 도메인 - 데이터타입, 속성 - 변수
  - 특정 데이터 타입으로 정의한 변수에는 해당 데이터 타입의 값만 저장할 수 있음.
  - 도메인을 정하면 해당 도메인에 속하는 속성값만 저장할 수 있음.

### 1.4> 널 값(null)
- 특정 투플의 속성값에 대하여 값을 모르거나, 적합한 값이 없는 경우 `null`을 사용
- null은 없음을 의미. 0이나 공백문자와 다르다!

### 1.5> 차수(degree)
- 한 릴레이션에서 속성의 전체 개수
- 일반적으로 자주 변하지 않는 정적인 특징이 있음

### 1.6> 카디널리티(cardinality)
- 한 릴레이션에서 투플 전체의 개수
- 투플이 없는 릴레이션이 존재할 수 있음
- 새로 투플이 삽입되거나, 기존 투플이 삭제될 수 있으므로 자주 변하는 동적인 특징이 있음.

---

## 2) 릴레이션과 데이터베이스의 구성

![Relation_Schema_And_Instance.jpg](img/Relation_Schema_And_Instance.jpg)

릴레이션 = 릴레이션 스키마 + 릴레이션 인스턴스

### 2.1> 릴레이션 스키마(Relation Schema)
> 릴레이션이름(속성이름1, 속성이름2, 속성이름3, ... , 속성이름n) 
- 릴레이션의 이름과 릴레이션에 포함된 모든 속성의 이름으로 정의하는 논리적 구조
- 릴레이션의 이름이 무엇인지, 릴레이션을 구성하고 있는 속성들은 무엇인지 쉽게 파악할 수 있음
- 릴레이션 내포(Relation Intension)라고도 부름.
- 구조는 자주 바뀌지 않다보니 릴레이션 스키마는 자주 변하지 않는 정적인 특징이 있음

### 2.2> 릴레이션 인스턴스
- 어느 한 시점에, 릴레이션에 존재하는 투플들의 집합
- 현재 릴레이션의 실제 내용값들.
- DBMS는 내부적으로 데이터 조작어(DML)을 이용해 릴레이션 인스턴스의 투플들에 대한 CRUD를 수행함.
- 간단히 릴레이션이라고 부르기도 하고, 릴레이션 외연(Relation extension)이라고도 부름.
- 실제 내부값은 자주 변경되기 때문에, 릴레이션 인스턴스는 자주 변경되는 동적인 특징이 있음


### 2.3> 데이터베이스 스키마와 데이터베이스 인스턴스

![DataBase_Schema_And_Instance.jpg](img/DataBase_Schema_And_Instance.jpg)

데이터베이스는 릴레이션 여러개로 구성
1. 데이터베이스 스키마
   - 릴레이션 스키마들의 모음
   - 데이터베이스 스키마의 설계는 즉, 필요한 모든 릴레이션들의 스키마를 모두 정의하는 것

2. 데이터베이스 인스턴스
   - 릴레이션 인스턴스의 모음
   - 어느 한 시점에서 데이터베이스에 저장된 데이터의 전체 집합
   - 데이터베이스를 구성하는 모든 릴레이션의 인스턴스를 모아둔 것

---

## 3) 릴레이션의 특성

### 3.1> 투플의 유일성 : 하나의 릴레이션에는 동일한 투플이 존재할 수 없다.
- 하나의 릴레이션에 똑같은 투플이 존재해선 안 되고, 모든 투플들에는 다른 투플들과 구별되는 유일한 특성이 있어야함.
- 관계형 데이터 모델의 릴레이션에서는, 하나 또는 여러개의 속성을 미리 정해두고 이 속성값을 투플마다 다르게 지정하여 투플의 유일성을 판단
- 투플을 유일하게 구별하기 위해 선정되는 속성(또는 속성들의 모임)을 키(key)라고 함.
- key를 이용해 투플의 유일성이 만족되면, 릴레이션에서 원하는 투플에 쉽게 접근할 수 있음.

### 3.2> 투플의 무순서 : 하나의 릴레이션에서 투플 사이의 순서는 무의미하다.
- 투플의 순서가 뒤바뀌어도 다른 릴레이션이 될 수 없고, 순서와 상관없이 투플의 내용이 같으면 동일한 릴레이션
- 집합(Set)에서는 원소 사이의 순서가 없듯, 릴레이션에서의 투플 사이의 순서는 무의미함
- 릴레이션에서는 투플이 삽입순서에 따라 저장되긴 하지만, 효율적인 처리를 위해 투플의 순서를 임의대로 바꾸기도 함.

### 3.3> 속성의 무순서 : 하나의 릴레이션에서 속성 사이의 순서는 무의미하다.
- 속성의 순서가 뒤바뀌어도 다른 릴레이션이 될 수 없고, 순서와 상관없이 같은 속성들로 구성되어 있어야 동일한 릴레이션
- 속성값은 릴레이션에서 위치가 아닌 속성의 이름으로 접근하므로, 속성 사이의 순서는 무의미
- 하나의 릴레이션에는 이름이 같은 속성이 존재할 수 없고, 속성의 의미가 명확히 드러나는 것으로 사용하는 것이 좋음.

### 3.4> 속성의 원자성 : 속성 값으로 원자 값만 사용할 수 있다.
- 모든 속성값은 더는 분해할 수 없는 하나의 값, 원자 값만 가질 수 있다.
- 하나의 속성은 여러개의 값, 다중값을 가질 수 없다.
- 실세계에서는 다중값을 가진 상황이 존재할 수 있으나, 관계형 데이터 모델은 이러한 개념을 배제하고, 단순한 구조로 정의하고자 하는 특징이 있어 다중값을 허용하지 않음.

---

## 4) 키의 종류

### 키(key)
- 모든 개체 인스턴스 각각을 식별하는데 사용하는 속성
- 투플을 식별하는게 목적이므로, 모든 속성을 이용하는 것보다 일부 속성만 이용하는 것이 효율성을 높일 수 있음.
- 관계형 데이터 모델에서 키는 중요한 제약조건을 정의함
- 슈퍼키, 후보키, 기본키, 대체키, 외래키로 분류할 수 있음.


### 4.1> 슈퍼키 (Super Key)
- 유일성(uniqueness)을 만족하는 속성 또는 속성들의 집합
  - 하나의 릴레이션에서 키로 지정된 속성 값은 투플마다 달라야한다.
  - 키 값이 같은 투플은 존재할 수 없다.
- 슈퍼키를 포함하는 속성 집합은 모두 슈퍼키가 될 수 있다.
  - 예) 고객아이디, (고객아이디, 고객이름), ...
- 한계점
  - 슈퍼키만 놓고 봤을 때는 튜플이 서로 다름을 판단하기 위해 즉 불필요한 속성값까지 확인해야하는 비효율적인 작업이 필요할 수 있음.
  - 필요한 속성의 집합만으로 튜플을 유일하게 구별할 수 있도록 하는 다른 키의 개념이 필요함.
    
### 4.2> 후보키 (Candidate Key)
- 유일성과 최소성을 만족하는 속성 또는 속성들의 집합
- 투플을 구별하기 위해 꼭 필요한 최소한의 속성들로 구성
  - 예) (고객아이디)는 유일성, 최소성을 모두 만족하므로 후보키임.
  - 예) (고객아이디, 고객이름) 은 최소성을 불만족하므로 후보키가 될 수 없음.
- 하나의 속성으로 구성되는 키는 최소성을 반드시 만족.
- 후보키가 되기 위한 최소한의 조건인 유일성/최소성의 특성을, 새로운 투플이 삽입되거나 기존 투플 속성값이 바뀌어도 유지되어야함.
- 당장 식별되는 릴레이션 인스턴스의 값만을 두고 슈퍼키, 후보키를 설정하기보다 실세계의 환경까지 고려하여 본 의미를 정확히 이해하고 선정해야함.
  - 예) 고객 투플의 고객명은 당장 사람 이름이 겹치지 않더라도, 동명이인이 들어올 가능성이 있기 때문에 슈퍼키, 후보키로 사용하지 않는 것이 바람직하다.

### 4.3> 기본키(Primary Key)
- 후보키 중에서 기본적으로 사용하기 위해 선택한 키.
- 릴레이션에서 투플을 구별하기 위해 반드시 선택해야하는 후보키
- 후보키가 1개이면 그것을 기본키로 쓰면 되지만, 2개 이상일 경우 데이터베이스 사용 환경을 고려하여 적합한 것을 선택해야함.
- 기본키 선정시 고려사항
  - null을 가질 수 있는 속성이 포함된 후보키는 기본키로 부적합
    - 예) (고객이름, 주소)를 기본키로 지정할 경우 주소가 null을 허용할 시 다른 투플과 구별이 힘들어지므로 기본키로 지정하지 않는 것이 좋음. 
  - 값이 자주 변경될 수 있는 속성이 포함된 후보키는 기본키로 부적합
    - 속성값이 바뀔 때마다, 기본키값으로 적합한지 여부를 판단해야해서 번거로움.
  - 단순한 후보키를 기본키로 선택
    - 자리수가 적은 정수나 문자열인 속성, 또는 구성 속성의 개수가 적은 후보키가 최선
    - 사용자, 관리자, 실제 컴퓨터 시스템 어느쪽이든 단순한 최소한의 속성을 기본키로 하는 것을 선호.

### 4.4> 대체키(Alternate Key)
- 기본키가 되지 못 한 후보키들

### 4.5> 외래키(Foreign Key)
- 다른 릴레이션의 기본키를 그대로 참조하는 속성 또는 속성의 집합
- 어떤 릴레이션에 소속된 속성 또는 속성 집합이, 다른 릴레이션의 기본키가 되는 키.
- 외래키를 가진 릴레이션을 참조하는 릴레이션, 기본키를 가진 릴레이션을 참조되는 릴레이션이라고 함.
- 외래키 속성의 도메인과 참조되는 기본키 속성의 도메인은 반드시 같아야함
  - 도메인이 같아야, 연관성 있는 투플을 찾기 위한 비교 연산이 가능해짐.
- 외래키는 반드시 다른 릴레이션의 기본키를 참고하여야함.
  - (기본키가 아닌 경우, 투플을 유일하게 구별하기 어려움.)
- 하나의 릴레이션에는 외래키가 여러개 존재할 수 있음.
- 외래키를 기본키로 사용할 수도 있고 여러개의 외래키를 포함하여 기본키를 구성할 수 있음.
- 참조하는 릴레이션과 참조되는 릴레이션이 같을 수도 있음. 즉, 외래키 자신이 속한 릴레이션의 기본키를 참조하도록 외래키를 정의할 수 있음.
  - 예) (기본키 - 고객아이디) - (외래키 : 가입추천고객)
- 외래키는 기본키를 참조하지만, 기본키가 아니기 때문에 null값을 가질 수 있음.
  - 예) 가입추천고객이 null이더라도 이미 기본키가 존재하기 때문에 투플을 특정할 수 있음
  
---