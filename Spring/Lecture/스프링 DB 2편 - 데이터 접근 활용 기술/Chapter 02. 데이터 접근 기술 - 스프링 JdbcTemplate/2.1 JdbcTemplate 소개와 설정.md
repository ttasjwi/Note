# <a href = "../README.md" target="_blank">스프링 DB 2편 - 데이터 접근 활용 기술</a>
## Chapter 02. 데이터 접근 기술 - 스프링 JdbcTemplate
### 2.1 JdbcTemplate 소개와 설정
1) 설정이 편리하다.
2) 순수 Jdbc의 반복 문제를 해결했다.
3) 단점 : SQL 작성의 수고, 난해한 동적 SQL
4) 의존 라이브러리 추가(spring-jdbc, H2 데이터베이스 드라이버)

---

# 2.1 JdbcTemplate 소개와 설정

---

## 1) 설정이 편리하다.

- JdbcTemplate은 `spring-jdbc` 라이브러리에 포함되어 있는데, 이 라이브러리는 스프링으로 JDBC를 사용할 때 기본으로 사용되는 라이브러리이다.
- 의존 라이브러리를 등록해두면 별도의 복잡한 설정 없이 바로 사용할 수 있다.

---

## 2) 순수 Jdbc의 반복 문제를 해결했다.

- JdbcTemplate은 템플릿 콜백 패턴을 사용해서, JDBC를 직접 사용할 때 발생하는 대부분의 반복 작업을 대신 처리해준다.
- 개발자는 SQL을 작성하고, 전달할 파리미터를 정의하고, 응답 값을 매핑하기만 하면 된다.
- 우리가 생각할 수 있는 대부분의 반복 작업을 대신 처리해준다.
    - 커넥션 획득
    - statement 를 준비하고 실행
    - 결과를 반복하도록 루프를 실행
    - 커넥션 종료, statement , resultset 종료
    - 트랜잭션 다루기 위한 커넥션 동기화
    - 예외 발생시 스프링 예외 변환기 실행

---

## 3) 단점 : SQL 작성의 수고, 난해한 동적 SQL

- SQL을 한땀 한땀 직접 작성해야한다.
- 동적 SQL을 해결하기 어렵다.

---

## 4) 의존 라이브러리 추가(spring-jdbc, H2 데이터베이스 드라이버)
```groovy
dependencies {

    // ... 생략

    //JdbcTemplate 추가
    implementation 'org.springframework.boot:spring-boot-starter-jdbc'

    //H2 데이터베이스 추가
    runtimeOnly 'com.h2database:h2'

    // ... 생략
}
```

### 4.1 spring-jdbc 추가
- `org.springframework.boot:spring-boot-starter-jdbc` 를 추가하면 JdbcTemplate이 들어있는 `spring-jdbc`가 라이브러리에 포함된다.
- JdbcTemplate은 `spring-jdbc` 라이브러리만 추가하면 된다. 별도의 추가 설정 과정은 없다.

### 4.2 H2 데이터베이스 드라이버 추가

여기서는 H2 데이터베이스에 접속해야 하기 때문에 H2 데이터베이스의 클라이언트 라이브러리(Jdbc Driver)도 추가하자.

- runtimeOnly 'com.h2database:h2'

### 4.3 기존 테이블 롤백

```sql
drop table if exists item CASCADE;
create table item
(
    id        bigint generated by default as identity,
    item_name varchar(10),
    price     integer,
    quantity  integer,
    primary key (id)
);
```
- 진행하기 전에 먼저 H2 데이터베이스에 item 테이블을 생성해야 한다.

---
